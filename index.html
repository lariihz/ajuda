<!DOCTYPE html>
<html lang="pt-br"> <!--idioma -->
<head>
  <meta charset="UTF-8"> <!--define a codificação dos caracteres para suportar caracteres especiais-->
  <title>Cadastro de Funcionários</title> <!--titulo no navegador-->
  <style> /*estilo aplicados a pag*/
    body { /* aqui é so estilo das cores que vc quer*/
      font-family: Arial, sans-serif;
      background-color: #001027;
      margin: 200px;
      padding: 40px;
    }

    h1 {
      text-align: center;
      color: #171f8a;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background: #9b9daa;
      padding: 80px;
      border-radius: 50px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    input[type="text"] {
      width: calc(50% - 10px);
      padding: 10px;
      margin: 5px 5px 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      background-color: #13119e;
      color: white;
      cursor: pointer;
      margin-bottom: 15px;
      align-items: center;

    }

    button:hover {
      background-color: #45a049;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      background: #f0f0f0;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    li span {
      flex: 1;
    }

    .actions button {
      background-color: #063b16;
      margin-left: 5px;
    }

    .actions button:last-child {
      background-color: #5e0c07;
    }

    .actions button:hover {
      opacity: 1.5;
    }
  </style> <!--e é ate aqui que é o trem de como vc quer as cores e tal abre style fecha style-->
</head>
<body>
  <div class="container">
    <h1>Cadastro de Funcionários</h1> 
    <!--titulo do que esta na pag-->


    <!--campos de entrada de nome e cargo-->
    <input type="text" id="nome" placeholder="Nome">
    <input type="text" id="cargo" placeholder="Cargo">

    <!--botao para add funcionario-->
    <button onclick="adicionar()">Adicionar</button>

    <!--lista onde os funcionarios serao exibidos-->
    <ul id="lista"></ul>
  </div>

  <script>
    //url base da api
    const url = "http://localhost:8080/api/funcionarios";

    //funcao para buscar todos os funcionarios do banco de dados e exibir na tela
    function listar() {
      fetch(url)
        .then(res => res.json()) // converte a resposta em json
        .then(data => {
          const lista = document.getElementById("lista");
          lista.innerHTML = ""; // limpa a lista antes de preencher
          data.forEach(f => {
            lista.innerHTML += `
              <li>
                <span>${f.nome} - ${f.cargo}</span>
                <div class="actions">
                  <button onclick="editar(${f.id}, '${f.nome}', '${f.cargo}')">Editar</button>
                  <button onclick="excluir(${f.id})">Excluir</button>
                </div>
              </li>`;
          });
        });
    }

    //funcao para add um nome funcionario
    function adicionar() {
      const nome = document.getElementById("nome").value;
      const cargo = document.getElementById("cargo").value;

      if (!nome || !cargo) {
        alert("Preencha os dois campos!");
        return;
      }

      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ nome, cargo })
      }).then(() => {
        document.getElementById("nome").value = "";
        document.getElementById("cargo").value = "";
        listar(); // atualiza a lista apos add
      });
    }

    //funcao para excluir um funcionario pelo id 
    function excluir(id) {
      if (confirm("Deseja realmente excluir este funcionário?")) {
        fetch(`${url}/${id}`, { method: "DELETE" })
          .then(() => listar());
      }
    }

    //funcao para editar os dados de um funcionario 
    function editar(id, nomeAtual, cargoAtual) {
      const nome = prompt("Novo nome:", nomeAtual);
      const cargo = prompt("Novo cargo:", cargoAtual);

      if (nome && cargo) {
        fetch(`${url}/${id}`, {
          method: "PUT",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ nome, cargo })
        }).then(() => listar());
      }
    }

    //chama a funcao listar () automaticamente ao carregr a pagina 
    listar();
  </script>
</body>
</html>
